<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>회원가입 및 로그인</title>
  <style>
    .hidden { display: none; }
    .tab-button {
      padding: 8px 16px;
      cursor: pointer;
      border: none;
      background: #ddd;
    }
    .active {
      background: #333;
      color: white;
    }
  </style>
</head>
<body>
  <h1> 로그인 / 회원가입</h1>

  <!-- 탭 버튼 -->
  <div>
    <button id="loginTab" class="tab-button active">로그인</button>
    <button id="signupTab" class="tab-button">회원가입</button>
  </div>

  <!-- 로그인 폼 -->
  <div id="loginForm">
    <h2>로그인</h2>
    <input type="text" id="login_userid" placeholder="아이디"><br>
    <input type="password" id="login_userpw" placeholder="비밀번호"><br>
    <button id="loginBtn">로그인</button>
  </div>

  <!-- 회원가입 폼 -->
  <div id="signupForm" class="hidden">
    <h2>회원가입</h2>
    <input type="text" id="signup_userid" placeholder="아이디"><br>
    <input type="password" id="signup_userpw" placeholder="비밀번호"><br>
    <input type="text" id="signup_name" placeholder="이름"><br>
    <input type="text" id="signup_email" placeholder="이메일"><br>
    <button id="signupBtn">가입하기</button>
  </div>

  <script>
    // 탭 전환 기능
    const loginTab = document.getElementById("loginTab");
    const signupTab = document.getElementById("signupTab");
    const loginForm = document.getElementById("loginForm");
    const signupForm = document.getElementById("signupForm");

    loginTab.addEventListener("click", () => {
      loginForm.classList.remove("hidden");
      signupForm.classList.add("hidden");
      loginTab.classList.add("active");
      signupTab.classList.remove("active");
    });

    signupTab.addEventListener("click", () => {
      signupForm.classList.remove("hidden");
      loginForm.classList.add("hidden");
      signupTab.classList.add("active");
      loginTab.classList.remove("active");
    });

    // 로그인 fetch
    document.getElementById("loginBtn").addEventListener("click", () => {
      const userid = document.getElementById("login_userid").value;
      const password = document.getElementById("login_userpw").value;

      fetch("http://127.0.0.1:8080/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userid, password })
      })
      .then(res => res.json())
      .then(data => {
        localStorage.setItem("token", data.token);
        alert("로그인 성공!");
      })
      .catch(err => {
        console.error("로그인 실패:", err);
      });
    });

    // 회원가입 fetch
    document.getElementById("signupBtn").addEventListener("click", () => {
      const userid = document.getElementById("signup_userid").value;
      const password = document.getElementById("signup_userpw").value;
      const name = document.getElementById("signup_name").value;
      const email = document.getElementById("signup_email").value;

      fetch("http://127.0.0.1:8080/auth/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userid, password, name, email })
      })
      .then(res => res.json())
      .then(data => {
        alert("회원가입 성공!");
      })
      .catch(err => {
        console.error("회원가입 실패:", err);
      });
    });
  </script>
</body>
</html>
